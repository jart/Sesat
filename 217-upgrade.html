
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
  <HEAD>
    <LINK type="text/css" rel="stylesheet" href="resources/space.css">
    <STYLE type="text/css">

#PageContent {
	text-align: left;
	background-color: #fff;
	padding: 0px;
	margin: 0px;
    padding-bottom:20px; 
}

#TopTable {
    height: 104px; width: 100%; 
    background-image: url(/sunrise3.JPG); 
    background-repeat: no-repeat; 
    background-position: center;
}

div > #TopTable {
    position: fixed; z-index: 1; 
}

div > #PageContent {
    position: relative; 
    top: 114px;
}

      .footer {
        background-image:      url('/images/border/border_bottom.gif');
        background-repeat:     repeat-x;
        background-position:   left top;
        padding-top:           4px;
        color:                 #666;
      }
body, p, td, table, tr, .bodytext, .stepfield {
  font-family:          Trebuchet MS, Tahoma, sans-serif;
  font-size:            14px;
  margin:               0px;
  padding:              0px;
  padding-right:30px;
}
#leftColumn{
  float: left; 
  align: left; 
  text-align: left; 
  width: 13%; 
  border-right: solid lightgrey; 
  border-right-width:1px;
}
#leftColumn h5{
  text-decoration: none;
  color: #6B6965;
  font-size:            18px;
  font-weight: bold;
}
#leftColumn li a{
  text-decoration: none;
  color: #6B6965;
  font-weight: bold;
}
#leftColumn a:hover, #leftColumn a.active  {
  color: #1678C4;
  background-color: #F7EEDB;
}
#TopTable a{
  text-decoration: none;
  font-weight: bold;
}
    </STYLE>
    <SCRIPT type="text/javascript" language="javascript">
      var hide = null;
      var show = null;
      var children = null;

      function init() {

        /* Children initialization */
        hide = document.getElementById('hide');
        show = document.getElementById('show');
        children = document.all != null ?
                   document.all['children'] :
                   document.getElementById('children');
        if (children != null) {
          children.style.display = 'none';
          show.style.display = 'inline';
          hide.style.display = 'none';
        }
      }

      function showChildren() {
        children.style.display = 'block';
        show.style.display = 'none';
        hide.style.display = 'inline';
      }

      function hideChildren() {
        children.style.display = 'none';
        show.style.display = 'inline';
        hide.style.display = 'none';
      }
    </SCRIPT>
    <TITLE>2.17 Upgrade</TITLE>
  <META http-equiv="Content-Type" content="text/html;charset=UTF-8"></HEAD>
  <BODY onload="init()" style="background-color: #fff;">
<DIV>
    <TABLE id="TopTable" border="0" cellpadding="2" cellspacing="0" width="100%">
      <TR valign="bottom">
        <TD align="left" valign="bottom" class="topBarDiv" align="left" nowrap="">
          <!--img src="https://michaelsembwever.github.io/Sesat/sesat- black- logo.png" border="0"-->&nbsp;<A href="home.html" title="Sesat">Sesat</A>&nbsp;&gt;&nbsp;<A href="docs-support.html" title="Docs + Support">Docs + Support</A>&nbsp;&gt;&nbsp;<A href="upgrade-guides.html" title="Upgrade Guides">Upgrade Guides</A>&nbsp;&gt;&nbsp;<A href="" title="2.17 Upgrade">2.17 Upgrade</A>
        </TD>
        <TD align="right" valign="bottom" nowrap="">
          <FORM name="search" action="http://sesam.com/search/" method="get" onsubmit="getElementById('searchformq').value = getElementById('searchformq').value + ' site:sesat.no'; return true">
            <INPUT type="text" name="q" maxlength="255" value="" id="searchformq">        
            <INPUT type="submit" name="btnG" value="Search">
          </FORM>
        </TD>
      </TR> 
    </TABLE>
    <DIV id="PageContent">

<DIV id="leftColumn">
<H5 style="margin-top: -2px;">Get Sesat</H5>
<UL style="margin-top: -4px;">
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/product-whitepaper.html">
What is Sesat?</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/download.html" style="decorator-style: none;">
Download</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/kernel-feature-list.html">
Features</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/showcases-sesamno.html">
Screenshots</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/free-software-license.html">
License</A>
</LI>
</UL>

<H5>Documentation</H5>
<UL style="margin-top: -4px;">
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/development-guidelines.html">
Getting Started</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/tutorial-building-sesamcom.html">
Sesam.com tutorial</A>
</LI>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/faq.html">
FAQ</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
&nbsp;...<A href="https://michaelsembwever.github.io/Sesat/docs-support.html">more</A>
</LI>
</UL>
<H5>Development</H5>
<UL style="margin-top: -4px;">
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/kernel-roadmap.html">
Roadmap</A>
</LI>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/svn/">
Subversion Repository</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/getting-help.html">
Mailing lists</A>
</LI>
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/scarab/issues">
Issues</A>
</LI>
<!--LI class="none" style="list- style: none; margin- left: - 30px;">
<A href="https://michaelsembwever.github.io/Sesat/hudson/">
Hudson
</A>
</LI>
<LI class="none" style="list- style: none; margin- left: - 30px;">
<A href="https://michaelsembwever.github.io/Sesat/source/">
OpenGrok
</A>
</LI-->
</UL>

<H5>Projects</H5>
<UL style="margin-top: -4px;">
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/projects/sesat-kernel/">Search Framework</A><BR>
<A href="https://michaelsembwever.github.io/Sesat/projects/sesat-kernel/sesat-core-api">Search Library</A><BR>
<A href="https://michaelsembwever.github.io/Sesat/projects/sesat-kernel/sesat-mojo/">Mojo</A><BR>
<A href="https://michaelsembwever.github.io/Sesat/projects/sesat-admin/sesat-user">User Service</A>
</LI>
</UL>

<H5>Commons</H5>
<UL style="margin-top: -4px;">
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="http://commons-ioc.sourceforge.net/">Contextual IoC</A><BR>
<A href="https://michaelsembwever.github.io/Sesat/projects/sesat-commons/commons-interpreter/">Interpreter</A><BR>
<A href="http://commons-reflect.sourceforge.net/">Reflection</A><BR>
<A href="http://commons-ref-map.sourceforge.net/">Reference Map</A><BR>
<A href="http://commons-visitor.sourceforge.net/">Visitor</A><BR>
</LI>
</UL>


<H5>Sitemap</H5>
<UL style="margin-top: -4px;">
<LI class="none" style="list-style: none; margin-left: -30px;">
<A href="https://michaelsembwever.github.io/Sesat/sitemap.html">Sitemap</A><BR>
</LI>
</UL>
</DIV>

      <DIV class="pagecontent" style="width: 83%; float: right;">
        <DIV class="wiki-content">
          <STYLE type="text/css">/*<![CDATA[*/
div.rbtoc1222420247851 {margin-left: 1.5em;padding: 0px;}
div.rbtoc1222420247851 ul {margin-left: 0px;padding-left: 5;}
div.rbtoc1222420247851 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</STYLE><DIV class="rbtoc1222420247851">
<UL>
    <LI><A href="#2.17Upgrade-Compatibilitychanges">Compatibility changes</A></LI>
<UL>
    <LI><A href="#2.17Upgrade-EnablesesattemplatingsystemtoacceptJSPtemplates%252817Feb2008%2529">Enable sesat templating system to accept JSP templates (17 Feb 2008)</A></LI>
    <LI><A href="#2.17Upgrade-AnonymousTokenPredicates%25282April2008%2529">Anonymous TokenPredicates (2 April 2008)</A></LI>
    <LI><A href="#2.17Upgrade-index.jspremoved">index.jsp removed</A></LI>
    <LI><A href="#2.17Upgrade-Baseskinnowcalled%2522generic.sesam%2522">Base skin now called &quot;generic.sesam&quot;</A></LI>
    <LI><A href="#2.17Upgrade-GammaprofilenowanalmostidenticalcopyoftheProductionprofile">Gamma profile now an almost identical copy of the Production profile</A></LI>
    <LI><A href="#2.17Upgrade-ControlLevel.RUNNINGQUERYRESULTHANDLINGrenamedtoRUNNINGQUERYHANDLING%25285Jul2008%2529">ControlLevel.RUNNING_QUERY_RESULT_HANDLING renamed to RUNNING_QUERY_HANDLING (5 Jul 2008)</A></LI>
    <LI><A href="#2.17Upgrade-ChangethesyntaxofXMLwrittentothelogfilesesam.access%252807Jul2008%2529">Change the syntax of XML written to the logfile sesam.access (07 Jul 2008)</A></LI>
</UL>
    <LI><A href="#2.17Upgrade-NewFeatures">New Features</A></LI>
<UL>
    <LI><A href="#2.17Upgrade-UsingJSPsinskins%252816Feb2008%2529">Using JSPs in skins (16 Feb 2008)</A></LI>
    <LI><A href="#2.17Upgrade-AllParametersDirectiveadded%25282Jun2008%2529">AllParametersDirective added (2 Jun 2008)</A></LI>
    <LI><A href="#2.17Upgrade-SearchMode.isAutoBroadening%2528%2529added%252816Sep2008%2529">SearchMode.isAutoBroadening() added (16 Sep 2008)</A></LI>
    <LI><A href="#2.17Upgrade-Rssmodecanexecutedmultiplecommands%25285Jul2008%2529">Rss mode can executed multiple commands (5 Jul 2008)</A></LI>
    <LI><A href="#2.17Upgrade-CopySearchRunHandler%25285Jul2008%2529">CopySearchRunHandler (5 Jul 2008)</A></LI>
    <LI><A href="#2.17Upgrade-FederatorRunHandler%25285Jul2008%2529">FederatorRunHandler (5 Jul 2008)</A></LI>
</UL>
    <LI><A href="#2.17Upgrade-Requirements">Requirements</A></LI>
<UL>
    <LI><A href="#2.17Upgrade-Renamingofnewscasefacade%252816Sept2008%2529">Renaming of news case facade (16 Sept 2008)</A></LI>
</UL>
</UL></DIV>

<H1><A name="2.17Upgrade-Compatibilitychanges"></A>Compatibility changes</H1>

<H6><A name="2.17Upgrade-EnablesesattemplatingsystemtoacceptJSPtemplates%2817Feb2008%29"></A>Enable sesat templating system to accept JSP templates (17 Feb 2008)</H6>
<BLOCKQUOTE><P><A href="https://jira.sesam.no/jira/browse/SEARCH-4294" rel="nofollow">SEARCH-4294 Enable sesat templating system to accept JSP templates</A></P>

<P><INS>Changed API:</INS></P>
<UL class="alternate" type="square">
	<LI>AbstractVelocityTemplateTag.importTemplate(..) renamed to importVelocity(..). method parameters unchanged.</LI>
</UL>
</BLOCKQUOTE>

<H6><A name="2.17Upgrade-AnonymousTokenPredicates%282April2008%29"></A>Anonymous TokenPredicates (2 April 2008)</H6>
<BLOCKQUOTE>
<P><A href="https://jira.sesam.no/jira/browse/SEARCH-4421" rel="nofollow">SEARCH-4421 Anonymous TokenPredicates</A></P>

<P>TokenPredicate is now a interface. It's inner classes provide all functionality: Categories for the existing hardcoded enumerations, Static for static-utility methods, and TokenPredicateImpl for anonymous TokenPredicates.</P>

<P><INS>Changed API:</INS></P>
<UL class="alternate" type="square">
	<LI>All of TokenPredicate's existing enums have been moved into TokenPredicate.Categories</LI>
	<LI>All of TokenPredicate's static methods have been moved to TokenPredicate.Static</LI>
</UL>


<P><INS>Added APIs:</INS></P>
<UL class="alternate" type="square">
	<LI>TokenPredicate.Static.getAnonymousTokenPredicate(String) :: finds an existing anonymous TokenPredicate</LI>
	<LI>TokenPredicate.Static.createAnonymousTokenPredicate(String, Type) :: create a anonymous TokenPredicate</LI>
	<LI>TokenPredicate.Static.getTokenPredicates(Type) :: retrieve all tokens by type</LI>
</UL>


<P><INS>Removed APIs:</INS></P>
<UL class="alternate" type="square">
	<LI>TokenPredicate.ALWAYSTRUE :: had been deprecated for quite some time already.</LI>
	<LI>TokenPredicate.getFastTokenPredicates() :: use TokenPredicate.Static.getTokenPredicates(Type) instead</LI>
</UL>


<P><INS>Deprecated APIs:</INS></P>
<UL class="alternate" type="square">
	<LI>TokenPredicate.getMagicTokenPredicates() :: norway specific logic</LI>
	<LI>TokenPredicate.getTriggerTokenPredicates() :: norway specific logic</LI>
</UL>
</BLOCKQUOTE>

<H6><A name="2.17Upgrade-index.jspremoved"></A>index.jsp removed</H6>
<BLOCKQUOTE><P>Any root request (ie &quot;/&quot;) is now automatically forwarded to &quot;/search/?&quot;.<BR>
So instead of using the index.jsp -&gt; index.vm mechanism the layout's front defined template is used.<BR>
If your front page is broken you can most likely fix it just by adding <EM>front=&quot;index&quot;</EM> to that tab's layout element in views.xml<BR>
For the &quot;/&quot; case, where neither the c nor q paramter is defined make sure you've set site.defaultTab in configuration.properties. </P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-Baseskinnowcalled%22generic.sesam%22"></A>Base skin now called &quot;generic.sesam&quot;</H6>
<BLOCKQUOTE><P>Whereas before it was &quot;generic.sesam.no&quot;.<BR>
The same goes for the profile counter parts: generic.alpha.test.sesam, generic.nuclei.test.sesam, generic.beta.test.sesam, generic.electron.test.sesam.<BR>
It is wise now to explicitly define the port in the sesam.site.parent property in any skin extending generic.sesam, since generic.sesam isn't a valid domain and might not be successfully handled by any front end proxy, eg apache, handling the default port 80.</P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-GammaprofilenowanalmostidenticalcopyoftheProductionprofile"></A>Gamma profile now an almost identical copy of the Production profile</H6>
<BLOCKQUOTE><P>Allows multiple tomcat instances to be run behind the one proxy front making it easy to switch between profiles. Useful for supporting multiple version of sesat-kernel under the one domain.</P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-ControlLevel.RUNNINGQUERYRESULTHANDLINGrenamedtoRUNNINGQUERYHANDLING%285Jul2008%29"></A>ControlLevel.RUNNING_QUERY_RESULT_HANDLING renamed to RUNNING_QUERY_HANDLING (5 Jul 2008)</H6>
<BLOCKQUOTE>
<P><INS>Changed API:</INS></P>
<UL class="alternate" type="square">
	<LI>ControlLevel.RUNNING_QUERY_RESULT_HANDLING now ControlLevel.RUNNING_QUERY_HANDLING</LI>
</UL>
</BLOCKQUOTE>

<H6><A name="2.17Upgrade-ChangethesyntaxofXMLwrittentothelogfilesesam.access%2807Jul2008%29"></A>Change the syntax of XML written to the logfile sesam.access (07 Jul 2008)</H6>
<BLOCKQUOTE><P><A href="https://michaelsembwever.github.io/Sesat/pipermail/kernel-commits/2008-July/006292.html" rel="nofollow">Commit r6724</A></P>

<P>Instead of using the parameter's key, as the name of the tag, we now use the fixed tag &lt;parameter&gt; for this. The key and value are added as parameters inside the parameter tag.<BR>
So we have gone from this:<BR>
&lt;1_wonkey_name&gt;123&lt;/1_wonkey_name&gt;<BR>
to<BR>
&lt;parameter key=&quot;1_wonkey_name&quot; value=&quot;123&quot; /&gt;<BR>
<INS>Changed API:</INS></P>
<UL class="alternate" type="square">
	<LI>sesam.access logfile</LI>
</UL>
</BLOCKQUOTE>

<H1><A name="2.17Upgrade-NewFeatures"></A>New Features</H1>

<H6><A name="2.17Upgrade-UsingJSPsinskins%2816Feb2008%29"></A>Using JSPs in skins (16 Feb 2008)</H6>
<BLOCKQUOTE><P><A href="https://jira.sesam.no/jira/browse/SEARCH-4290" rel="nofollow">SEARCH-4290 Design and code with JSPs in skins</A>. </P>

<P>It is now possible to use both JSPs and Velocity templates in the skin's templates/ folder.<BR>
The full documentation on this feature is in the javadoc for <A href="https://michaelsembwever.github.io/Sesat/projects/sesat-kernel/sesat-war/apidocs/no/sesat/search/http/filters/SiteJspLoaderFilter.html" rel="nofollow">SiteJspLoaderFilter</A></P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-AllParametersDirectiveadded%282Jun2008%29"></A>AllParametersDirective added (2 Jun 2008)</H6>
<BLOCKQUOTE><P><A href="https://jira.sesam.no/jira/browse/SEARCH-4760" rel="nofollow">SEARCH-4760 Replace usages of ${request.requestURL} in velocity templates with AllParametersDirective</A>. </P>

<P>Velocity templates are encouraged to be $request free and so http-implementation independent.<BR>
So now $request.queryString can be replaced with #allParameters()</P>

<P>It is also an encoding safe way of writing out the current URL's query string in correct UTF-8 encoding if the original request was ISO encoded.</P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-SearchMode.isAutoBroadening%28%29added%2816Sep2008%29"></A>SearchMode.isAutoBroadening() added (16 Sep 2008)</H6>
<P>By adding the attribute auto-broadening=&quot;false&quot; the query will not be wrapped and re-executed when all commands return zero hits. Default value is true leaving functionality as is today.<BR>
See <A href="https://michaelsembwever.github.io/Sesat/scarab/issues/id/SKER5004" rel="nofollow">SKER5004 Create option to disable the automatic rewrite of &lt;multi-word query&gt; to (&lt;multi-word query&gt;) when there are zero hits across all verticals</A></P>

<H6><A name="2.17Upgrade-Rssmodecanexecutedmultiplecommands%285Jul2008%29"></A>Rss mode can executed multiple commands (5 Jul 2008)</H6>
<BLOCKQUOTE>
<P>In views.xml/views/tab@rss-result-name multiple commands can be entered each separated by commas. The first will be used by the SyndicationGenerator and will continue to be the return result from SearchTab.getRssResultName(). An extra method has been added SearchTab.getRssCommands() that returns the whole list. This method is used by RunningQueryImpl to ensure all specified commands are executed in rss mode.</P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-CopySearchRunHandler%285Jul2008%29"></A>CopySearchRunHandler (5 Jul 2008)</H6>
<BLOCKQUOTE>
<P>A whole SearchDataObject in the datamodel can be copied with a new name.</P></BLOCKQUOTE>

<H6><A name="2.17Upgrade-FederatorRunHandler%285Jul2008%29"></A>FederatorRunHandler (5 Jul 2008)</H6>
<BLOCKQUOTE>
<P>Easily configurable run handler to merge results from multiple search command together into one ResultList.</P></BLOCKQUOTE>

<H1><A name="2.17Upgrade-Requirements"></A>Requirements</H1>

<H6><A name="2.17Upgrade-Renamingofnewscasefacade%2816Sept2008%29"></A>Renaming of news case facade (16 Sept 2008)</H6>
<BLOCKQUOTE><P><A href="https://jira.sesam.no/jira/browse/SEARCH-4987" rel="nofollow">SEARCH-4987 RMI doesn't work in alpha or beta</A></P>

<P><INS>Changed API in newsadmin-services:</INS></P>
<UL class="alternate" type="square">
	<LI>NewsCaseFacadeInterface renamed to NewsCaseFacade</LI>
</UL>


<P>The sesat revision r6808 requires an upgrade of newsadmin-services from <A href="https://michaelsembwever.github.io/Sesat/maven2/schibstedsok/newsadmin-services/1.4/" rel="nofollow">v1.4</A> to <A href="https://michaelsembwever.github.io/Sesat/maven2/schibstedsok/newsadmin-services/1.5/" rel="nofollow">v1.5</A> on the RMI backend server.</P></BLOCKQUOTE>
        </DIV>
              </DIV>

    <DIV style="clear: both;">
      <DIV style="float: left;">&nbsp;&copy; 2007-2009 <A href="http://schibsted.com/">Schibsted ASA</A></DIV>
      <DIV style="float: right;"><A href="mailto:mick@semb.wever.org">Contact</A>&nbsp;us</DIV>
    </DIV>

   </DIV>
</DIV>
</HTML>
